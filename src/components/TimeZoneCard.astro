---
import { getCurrentTime, formatTime, formatDate } from "../lib/helpers";
import Card from "./Card/index.astro";
---

<script>
  import { onCleanup, onMount } from "solid-js";
  import { formatTime, formatDate } from "../lib/helpers";

  let interval: ReturnType<typeof setInterval>;

  function updateClock() {
    const timeDisplay = document.getElementById("timeDisplay");
    const now = new Date();

    if (timeDisplay) {
      timeDisplay.innerHTML = `${formatTime(now)}`;
      timeDisplay.setAttribute("datetime", now.toISOString());
    }
  }

  onMount(() => {
    interval = setInterval(updateClock, 1000);
  });

  onCleanup(() => {
    clearInterval(interval);
  });
</script>

<Card
  colSpan="lg:col-span-1"
  class="md:min-w-xs lg:min-w-auto"
  rowSpan="md:row-span-2"
  title="Time zone"
>
  <div class="flex text-xl items-center justify-center h-full font-serif">
    <time datetime="" id="timeDisplay" class="flex items-center">
      {formatTime(getCurrentTime())}
    </time>
  </div>
</Card>
